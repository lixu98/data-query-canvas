<nz-modal [(nzVisible)]="isVisible" [nzTitle]="'新增领域对象（来源于' + node?.domainObjectName + '）'" nzWidth="960px" (nzOnCancel)="close()" (nzOnOk)="handleOk()" [nzOkDisabled]="!setOfCheckedId.size">
    <ng-container *nzModalContent>
        <div class="table-search">
            <button (click)="handleAddRelation()" nz-button nzType="primary">
                <i nz-icon>
                    <svg width="16" height="16" viewBox="0 0 16 16"><g><g><path d="M8,2C7.72386,2,7.5,2.223858,7.5,2.5L7.5,7.5L2.5,7.5C2.223858,7.5,2,7.72386,2,8C2,8.27614,2.223858,8.5,2.5,8.5L7.5,8.5L7.5,13.5C7.5,13.7761,7.72386,14,8,14C8.27614,14,8.5,13.7761,8.5,13.5L8.5,8.5L13.5,8.5C13.7761,8.5,14,8.27614,14,8C14,7.72386,13.7761,7.5,13.5,7.5L8.5,7.5L8.5,2.5C8.5,2.223858,8.27614,2,8,2Z"/></g></g></svg>
                </i>新增关联关系
            </button>
        </div>
        <nz-table
            #rowSelectionTable
            nzSize="small"
            nzBordered
            [nzLoading]="loading"
            [nzShowPagination]="false"
            [nzData]="listOfData"
            [nzNoResult]="emptyTpl"
        >
            <thead>
            <tr>
                <th [nzChecked]="checked" [nzIndeterminate]="indeterminate" (nzCheckedChange)="onAllChecked($event)"></th>
                <th>领域对象名称</th>
                <th>领域对象编号</th>
                <th>业务模型名称</th>
                <th>业务模型编号</th>
                <th>
                    <span>引用关系</span>
                    <i nz-icon nzType="question-circle" nzTheme="outline" nz-tooltip nzTooltipTitle="画布所选当前节点领域对象与目标领域对象的关联关系"></i>
                </th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let row of rowSelectionTable.data">
                <td
                    [nzChecked]="setOfCheckedId.has(row.id)"
                    (nzCheckedChange)="onItemChecked(row.id, $event)"
                ></td>
                <td>{{ row.referenceDomainName }}</td>
                <td>{{ row.referenceDomainCode }}</td>
                <td>{{ row.referenceBusinessModelName }}</td>
                <td>{{ row.referenceBusinessModelCode }}</td>
                <td>
                    <nz-tag *ngFor="let tag of row.relations | slice:0:3">
                        {{ tag.leftName }}
                        <svg width="16" height="16" viewBox="0 0 16 16"><g><g transform="matrix(0.7071067690849304,0.7071067690849304,-0.7071067690849304,0.7071067690849304,3.1212999419203697,-7.0918807220023155)"><path d="M17.121307373046875,4.2218017578125L17.121307373046875,5.7218017578125C17.121307373046875,5.9979417578125,17.345167373046877,6.2218017578125,17.621307373046875,6.2218017578125C17.897447373046873,6.2218017578125,18.121307373046875,5.9979417578125,18.121307373046875,5.7208217578125L18.121307373046875,4.2218017578125Q18.121307373046875,2.5649417578125,16.949737373046876,1.3933717578125Q15.778157373046875,0.2218017578125,14.121307373046875,0.2218017578125Q12.464457373046875,0.2218017578125,11.292877373046874,1.3933717578125Q10.121307373046875,2.5649517578125,10.121307373046875,4.2218017578125L10.121307373046875,5.7218017578125C10.121307373046875,5.9979417578125,10.345165373046875,6.2218017578125,10.621307373046875,6.2218017578125C10.897450373046874,6.2218017578125,11.121307373046875,5.9979417578125,11.121307373046875,5.7218017578125L11.121307373046875,4.2218017578125Q11.121307373046875,2.9791617578125,11.999987373046874,2.1004817578125Q12.878667373046875,1.2218017578125,14.121307373046875,1.2218017578125Q15.363947373046875,1.2218017578125,16.242627373046876,2.1004817578125Q17.121307373046875,2.9791617578125,17.121307373046875,4.2218017578125ZM14.621307373046875,10.2218017578125L14.621307373046875,4.2218017578125C14.621307373046875,3.9456617578125,14.397447373046875,3.7218017578125,14.121307373046875,3.7218017578125C13.845167373046875,3.7218017578125,13.621307373046875,3.9456617578125,13.621307373046875,4.2218017578125L13.621307373046875,10.2218017578125C13.621307373046875,10.4979017578125,13.845167373046875,10.7218017578125,14.121307373046875,10.7218017578125C14.397447373046875,10.7218017578125,14.621307373046875,10.4979017578125,14.621307373046875,10.2218017578125ZM10.121307373046875,8.7218017578125C10.121307373046875,8.4456617578125,10.345165373046875,8.2218017578125,10.621307373046875,8.2218017578125C10.897450373046874,8.2218017578125,11.121307373046875,8.4456617578125,11.121307373046875,8.7218017578125L11.121307373046875,10.2218017578125Q11.121307373046875,11.4644017578125,11.999987373046874,12.3431017578125Q12.878667373046875,13.2218017578125,14.121307373046875,13.2218017578125Q15.363947373046875,13.2218017578125,16.242627373046876,12.3431017578125Q17.121307373046875,11.4644017578125,17.121307373046875,10.2218017578125L17.121307373046875,8.7218017578125C17.121307373046875,8.4456617578125,17.345167373046877,8.2218017578125,17.621307373046875,8.2218017578125C17.897447373046873,8.2218017578125,18.121307373046875,8.4456617578125,18.121307373046875,8.7227817578125L18.121307373046875,10.2218017578125Q18.121307373046875,11.8787017578125,16.949737373046876,13.0502017578125Q15.778167373046875,14.2218017578125,14.121307373046875,14.2218017578125Q12.464447373046875,14.2218017578125,11.292877373046874,13.0502017578125Q10.121307373046875,11.8787017578125,10.121307373046875,10.2218017578125L10.121307373046875,8.7218017578125Z" fill-rule="evenodd" fill="#1D1C33" fill-opacity="1"/></g></g></svg>
                        {{ tag.rightName }}
                    </nz-tag>
                    <nz-tag *ngIf="row?.relations.length > 3" nz-popover [nzPopoverContent]="relationTpl">+{{ row?.relations.length - 3}}</nz-tag>
                </td>
                <ng-template #relationTpl>
                    <app-canvas-view-relation [data]="row"></app-canvas-view-relation>
                </ng-template>
            </tr>
            </tbody>
        </nz-table>
        <ng-template #emptyTpl>
            <app-empty-data></app-empty-data>
        </ng-template>
    </ng-container>
</nz-modal>