<div class="creat_wrap">
    <div class="header_wrap">
        <div class="info_title">
            <span> {{routerParams?.querySchemaName}}</span>
            <svg style="margin-right:6px;" (click)="addChange(true)" class="edit_icon"
                xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" version="1.1"
                width="16" height="16.0001220703125" viewBox="0 0 16 16.0001220703125">
                <g>
                    <g>
                        <path
                            d="M11.14637,2.1464241118164065C11.24014,2.0526554118164064,11.36732,1.9999769628044062,11.49993,1.9999771118164062C11.63253,1.9999772310254063,11.75971,2.052655611816406,11.85348,2.1464241118164065L13.8535,4.146447111816406C14.0488,4.341707111816406,14.0488,4.658287111816406,13.8535,4.853557111816406L6.8144,11.892707111816406C6.72063,11.986477111816406,6.59345,12.039177111816405,6.46084,12.039177111816405L4.46077,12.039177111816405C4.3281600000000005,12.039177111816405,4.2009799999999995,11.986447111816407,4.10722,11.892677111816406C4.013450000000001,11.798907111816407,3.96077,11.671737111816407,3.96077,11.539127111816406L3.9608,9.539107111816406C3.9608,9.406497111816407,4.0134799999999995,9.279317111816408,4.10724,9.185557111816406L11.14637,2.1464241118164065ZM4.960789999999999,9.746217111816406L4.96078,11.039137111816407L6.25374,11.039147111816407L12.7928,4.500007111816407L11.49993,3.2070871118164064L4.960789999999999,9.746217111816406ZM13.5,12.999977111816406L2.5,12.999977111816406C2.223858,12.999977111816406,2,13.223877111816407,2,13.499977111816406C2,13.776177111816406,2.223857,13.999977111816406,2.5,13.999977111816406L13.5,13.999977111816406C13.7761,13.999977111816406,14,13.776177111816406,14,13.499977111816406C14,13.223877111816407,13.7761,12.999977111816406,13.5,12.999977111816406Z"
                            fill="#8C8B99" fill-opacity="1" />
                    </g>
                </g>
            </svg>
            <svg nz-popconfirm nzPopconfirmTitle="是否确认删除?" nzPopconfirmPlacement="bottom"
                (nzOnConfirm)="deleteQueryPlan()" xmlns="http://www.w3.org/2000/svg" class="edit_icon"
                xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="16"
                height="16.0001220703125" viewBox="0 0 16 16.0001220703125">
                <g>
                    <g>
                        <path
                            d="M13.5,4L11,4C11,3.94626,10.99134,3.8928700000000003,10.97434,3.8418900000000002L10.47434,2.341886C10.40628,2.137715,10.21522,2.0000000298023,10,2L6,2C5.78478,2,5.593719999999999,2.137715,5.52566,2.341886L5.0258199999999995,3.8414099999999998L5.0258199999999995,3.8414099999999998C5.00866,3.8928700000000003,5,3.94626,5,4L2.5,4C2.223858,4,2,4.22386,2,4.5C2,4.77614,2.223858,5,2.5,5L3.5,5L3.5,12.5Q3.5,13.1213,3.93934,13.5607Q4.37868,14,5,14L11,14Q11.62132,14,12.0607,13.5607Q12.5,13.1213,12.5,12.5L12.5,5L13.5,5C13.7761,5,14,4.77614,14,4.5C14,4.22386,13.7761,4,13.5,4ZM9.63962,3L9.97295,4L6.02705,4L6.36038,3L9.63962,3ZM4.5,12.5L4.5,5L11.5,5L11.5,12.5Q11.5,13,11,13L5,13Q4.5,13,4.5,12.5ZM7,6C6.72386,6,6.5,6.22386,6.5,6.5L6.5,11C6.5,11.27614,6.72386,11.5,7,11.5C7.27614,11.5,7.5,11.27614,7.5,11L7.5,6.5C7.5,6.22386,7.27614,6,7,6ZM9,6C8.72386,6,8.5,6.22386,8.5,6.5L8.5,11C8.5,11.27614,8.72386,11.5,9,11.5C9.27614,11.5,9.5,11.27614,9.5,11L9.5,6.5C9.5,6.22386,9.27614,6,9,6Z"
                            fill-rule="evenodd" fill="#8C8B99" fill-opacity="1" />
                    </g>
                </g>
            </svg>
        </div>
        <div class="other_infor_wrap">
            <div>
                <span class="info_title">查询方案编码：</span>
                <span class="info_cont">{{routerParams?.querySchemaCode}}</span>
                <span class="line"></span>
                <span class="info_title">引用模型：</span>
                <span class="info_cont">{{routerParams?.modelName}}</span>
            </div>
            <div class="field_btn_list">
                <button nz-button nzType="default" *ngIf="inquiryFieldMapping" (click)="fieldMappingChange(true)">
                    <i nz-icon><svg width="16" height="16" viewBox="0 0 16 16"><g><g><path d="M8.5,2.0231857299804688C8.5,1.7470437299804686,8.27614,1.5231857299804688,8,1.5231857299804688C7.72386,1.5231857299804688,7.5,1.7470437299804686,7.5,2.0231857299804688L7.5,13.98858572998047C7.5,14.264685729980469,7.72386,14.48858572998047,8,14.48858572998047C8.27614,14.48858572998047,8.5,14.264685729980469,8.5,13.98858572998047L8.5,2.0231857299804688ZM3.99471,3.506585729980469L3.99471,2.506583729980469L3.50537,2.506583729980469C2.6769439999999998,2.506583729980469,2.00537109,3.178155729980469,2.00537109,4.006585729980468L3.00537,4.006585729980468C3.00537,3.730445729980469,3.2292300000000003,3.506585729980469,3.50537,3.506585729980469L3.99471,3.506585729980469ZM6.52031,2.506583729980469L6.52031,3.506585729980469L4.99707,3.506585729980469L4.99707,2.506583729980469L6.52031,2.506583729980469ZM9.518239999999999,3.506585729980469L9.518239999999999,2.506583729980469L12.4998,2.506583729980469C13.3282,2.506583729980469,13.9998,3.178155729980469,13.9998,4.006585729980468L13.9998,11.98858572998047C13.9998,12.816985729980468,13.3282,13.48858572998047,12.4998,13.48858572998047L9.518239999999999,13.48858572998047L9.518239999999999,12.48858572998047L12.4998,12.48858572998047C12.7759,12.48858572998047,12.9998,12.264685729980469,12.9998,11.98858572998047L12.9998,4.006585729980468C12.9998,3.730445729980469,12.7759,3.506585729980469,12.4998,3.506585729980469L9.518239999999999,3.506585729980469ZM3,6.397715729980469L3,4.999995729980469L2,4.999995729980469L2,6.397715729980469L3,6.397715729980469ZM2,7.284355729980469L3,7.284355729980469L3,8.695585729980468L2,8.695585729980468L2,7.284355729980469ZM3,10.999975729980468L3,9.634025729980468L2,9.634025729980468L2,10.999975729980468L3,10.999975729980468ZM3.00537,11.98858572998047C3.00537,12.264685729980469,3.2292300000000003,12.48858572998047,3.50537,12.48858572998047L3.99471,12.48858572998047L3.99471,13.48858572998047L3.50537,13.48858572998047C2.6769439999999998,13.48858572998047,2.00537109,12.816985729980468,2.00537109,11.98858572998047L3.00537,11.98858572998047ZM6.52031,12.48858572998047L6.52031,13.48858572998047L4.99707,13.48858572998047L4.99707,12.48858572998047L6.52031,12.48858572998047Z" fill-rule="evenodd" fill-opacity="1" /></g></g></svg></i>
                    字段映射
                </button>
                <button nz-button nzType="default" *ngIf="inquiryParameter" (click)="parameterChange(true)">
                    <i nz-icon><svg width="16" height="16" viewBox="0 0 16 16"><g><g><path d="M2,12.5L2,3.5Q2,2.87868,2.43934,2.43934Q2.87868,2,3.5,2L12.5,2Q13.1213,2,13.5607,2.43934Q14,2.87868,14,3.5L14,12.5Q14,13.1213,13.5607,13.5607Q13.1213,14,12.5,14L3.5,14Q2.87868,14,2.43934,13.5607Q2,13.1213,2,12.5ZM3,12.5Q3,13,3.5,13L12.5,13Q13,13,13,12.5L13,6L3,6L3,12.5ZM3,5L3,3.5Q3,3,3.5,3L12.5,3Q13,3,13,3.5L13,5L3,5ZM9.44827,7.72361L7.44827,11.72361C7.32477,11.9706,7.02444,12.0707,6.77745,11.94722C6.53046,11.82372,6.43035,11.52339,6.55384,11.2764L8.553840000000001,7.2764C8.677340000000001,7.02941,8.97767,6.9293,9.22466,7.05279C9.47165,7.17629,9.571760000000001,7.47662,9.44827,7.72361ZM6,7.5C6,7.57762,5.98193,7.65418,5.94721,7.72361L5.05902,9.5L5.94721,11.27639C5.98193,11.34582,6,11.42238,6,11.5C6,11.77614,5.77614,12,5.5,12C5.3106100000000005,12,5.13748,11.893,5.05279,11.72361L4.05279,9.72361C3.9824,9.582840000000001,3.9824,9.417159999999999,4.05279,9.27639L5.05279,7.27639C5.13748,7.107,5.3106100000000005,7,5.5,7C5.77614,7,6,7.22386,6,7.5ZM10,11.5C10,11.42238,10.01807,11.34582,10.05279,11.27639L10.94098,9.5L10.05279,7.72361C10.01807,7.65418,10,7.57762,10,7.5C10,7.22386,10.22386,7,10.5,7C10.68939,7,10.86252,7.107,10.94721,7.27639L11.94721,9.27639C12.0176,9.417159999999999,12.0176,9.582840000000001,11.94721,9.72361L10.94721,11.72361C10.86252,11.893,10.68939,12,10.5,12C10.22386,12,10,11.77614,10,11.5Z" fill-rule="evenodd" /></g></g></svg></i>
                    P参数
                </button>
                <ng-template #operColumnContent>
                    <div class="content">
                        <div class="item" *ngFor="let item of calColumn; let i = index;">
                            <span class="text-overflow" [title]="item.columnName">{{ item.columnName }}</span>
                            <div>
                                <i class="edit" (click)="editCalColumn(i)" nz-icon nzType="edit" nzTheme="outline"></i>
                                <svg class="delete" (click)="deleteCalColumn(i, item.fieldId)"
                                    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                    fill="none" version="1.1" width="16" height="16.0001220703125"
                                    viewBox="0 0 16 16.0001220703125">
                                    <g>
                                        <g>
                                            <path
                                                d="M13.5,4L11,4C11,3.94626,10.99134,3.8928700000000003,10.97434,3.8418900000000002L10.47434,2.341886C10.40628,2.137715,10.21522,2.0000000298023,10,2L6,2C5.78478,2,5.593719999999999,2.137715,5.52566,2.341886L5.0258199999999995,3.8414099999999998L5.0258199999999995,3.8414099999999998C5.00866,3.8928700000000003,5,3.94626,5,4L2.5,4C2.223858,4,2,4.22386,2,4.5C2,4.77614,2.223858,5,2.5,5L3.5,5L3.5,12.5Q3.5,13.1213,3.93934,13.5607Q4.37868,14,5,14L11,14Q11.62132,14,12.0607,13.5607Q12.5,13.1213,12.5,12.5L12.5,5L13.5,5C13.7761,5,14,4.77614,14,4.5C14,4.22386,13.7761,4,13.5,4ZM9.63962,3L9.97295,4L6.02705,4L6.36038,3L9.63962,3ZM4.5,12.5L4.5,5L11.5,5L11.5,12.5Q11.5,13,11,13L5,13Q4.5,13,4.5,12.5ZM7,6C6.72386,6,6.5,6.22386,6.5,6.5L6.5,11C6.5,11.27614,6.72386,11.5,7,11.5C7.27614,11.5,7.5,11.27614,7.5,11L7.5,6.5C7.5,6.22386,7.27614,6,7,6ZM9,6C8.72386,6,8.5,6.22386,8.5,6.5L8.5,11C8.5,11.27614,8.72386,11.5,9,11.5C9.27614,11.5,9.5,11.27614,9.5,11L9.5,6.5C9.5,6.22386,9.27614,6,9,6Z"
                                                fill-rule="evenodd" fill-opacity="1" />
                                        </g>
                                    </g>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="btn" (click)="editCalColumn()">新增运算列</div>
                </ng-template>

                <ng-template #calColumnBtn>
                    <i nz-icon>
                        <svg width="16" height="16" viewBox="0 0 16 16">
                            <g>
                                <g>
                                    <path d="M12,8L12,3.5Q12,3.29289,11.85355,3.1464499999999997Q11.70711,3,11.5,3L4.5,3Q4.29289,3,4.14645,3.1464499999999997Q4,3.29289,4,3.5L4,8C4,8.27614,3.77614,8.5,3.5,8.5C3.22386,8.5,3,8.27614,3,8L3,3.5Q3,2.87868,3.43934,2.43934Q3.87868,2,4.5,2L11.5,2Q12.1213,2,12.5607,2.43934Q13,2.87868,13,3.5L13,8C13,8.27614,12.7761,8.5,12.5,8.5C12.2239,8.5,12,8.27614,12,8ZM10.5,4.5L5.5,4.5C5.22386,4.5,5,4.72386,5,5C5,5.27614,5.22386,5.5,5.5,5.5L10.5,5.5C10.77614,5.5,11,5.27614,11,5C11,4.72386,10.77614,4.5,10.5,4.5ZM8,6.5L5.5,6.5C5.22386,6.5,5,6.72386,5,7C5,7.27614,5.22386,7.5,5.5,7.5L8,7.5C8.27614,7.5,8.5,7.27614,8.5,7C8.5,6.72386,8.27614,6.5,8,6.5ZM14,9.5C14,9.22386,13.7761,9,13.5,9L2.5,9C2.223858,9,2,9.22386,2,9.5C2,9.77614,2.223858,10,2.5,10L13.5,10C13.7761,10,14,9.77614,14,9.5ZM12,11L12,12.5Q12,12.7071,11.85355,12.8536Q11.70711,13,11.5,13L4.5,13Q4.29289,13,4.14645,12.8536Q4,12.7071,4,12.5L4,11C4,10.72386,3.77614,10.5,3.5,10.5C3.22386,10.5,3,10.72386,3,11L3,12.5Q3,13.1213,3.43934,13.5607Q3.87868,14,4.5,14L11.5,14Q12.1213,14,12.5607,13.5607Q13,13.1213,13,12.5L13,11C13,10.72386,12.7761,10.5,12.5,10.5C12.2239,10.5,12,10.72386,12,11Z" fill-opacity="1" />
                                </g>
                            </g>
                        </svg>
                    </i>
                    <span>
                        运算列
                        <span *ngIf="calColumn?.length > 0">({{calColumn.length}})</span>
                    </span>
                </ng-template>
                <button nz-button nzType="default" *ngIf="calColumn.length&&inquiryCalColumn" nz-popover
                    nzPopoverOverlayClassName="oper_column_list" nzPopoverPlacement="bottomLeft"
                    [nzPopoverContent]="operColumnContent">
                    <ng-container *ngTemplateOutlet="calColumnBtn"></ng-container>
                </button>
                <button nz-button nzType="default" *ngIf="!calColumn.length&&inquiryCalColumn" (click)="editCalColumn()">
                    <ng-container *ngTemplateOutlet="calColumnBtn"></ng-container>
                </button>
                <button nz-button nzType="default" *ngIf="inquiryOperation" nz-dropdown [nzDropdownMenu]="inquiryGenInvoke ? operationMenu : null">
                    操作
                    <i nz-icon>
                        <svg width="16" height="16" viewBox="0 0 16 16">
                            <g>
                                <g>
                                    <path d="M11.854807710876464,6.8540011389770505C12.050317710876465,6.658988138977051,12.050727710876465,6.342406138977051,11.855707710876466,6.146895138977051C11.660697710876466,5.951384038977051,11.344117710876464,5.950980638977051,11.148607710876465,6.145994138977051L8.012707710876466,9.274857138977051L4.851946710876465,6.144777138977051C4.677562710876465,5.972033038977051,4.4080497108764645,5.954020938977051,4.213821710876465,6.08993623897705L4.144847710876465,6.1481181389770505C3.950510010876465,6.344301138977051,3.952006310876465,6.660880138977051,4.148188710876465,6.855217138977051L7.6610877108764655,10.33507713897705C7.856437710876465,10.528587138977052,8.171387710876465,10.528047138977051,8.366067710876465,10.33385713897705L11.854807710876464,6.8540011389770505Z" fill-opacity="1" />
                                </g>
                            </g>
                        </svg>
                    </i>
                    <nz-dropdown-menu #operationMenu="nzDropdownMenu">
                        <ul nz-menu>
                            <li nz-menu-item class="operate_item">
                                <span (click)="openCallExamp()">产生调用示例</span>
                                <svg width="16" height="16" viewBox="0 0 24 24" (click)="copyApiName()">
                                    <path fill="currentColor" d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/>
                                </svg>
                            </li>
                        </ul>
                    </nz-dropdown-menu>
                </button>
            </div>
        </div>
    </div>
    <div class="main_wrap">
        <div class="main_title">查询方案试算</div>
        <div class="main_content">
            <div class="left" [style.width.px]="leftWidth">
                <nz-tabset (nzSelectedIndexChange)="onTabChange()">
                    <nz-tab *ngFor="let tab of tabList" [nzTitle]="tab.title" nzForceRender>
                        <ng-container [ngTemplateOutlet]="contentTpl"
                            [ngTemplateOutletContext]="{ $implicit: tab }"></ng-container>
                    </nz-tab>
                    <ng-template #contentTpl let-tab>
                        <div class="left-tree">
                            <nz-input-group class="search-filter" [nzSuffix]="searchIcon">
                                <input type="text" nz-input placeholder="请输入关键词" [(ngModel)]="keyword" [ngModelOptions]="{standalone: true}"  />
                            </nz-input-group>
                            <ng-template #searchIcon>
                                <svg width="16" height="16" viewBox="0 0 16 16">
                                    <g>
                                        <g>
                                            <path
                                                d="M11.019522833862304,11.726548092651367C10.065772833862304,12.521598092651367,8.838742833862305,12.999898092651367,7.499982833862305,12.999898092651367C4.462412833862304,12.999898092651367,1.9999828338623047,10.537498092651367,1.9999828338623047,7.499958092651367C1.9999828338623047,4.462408092651367,4.462412833862304,1.9999980926513672,7.499982833862305,1.9999980926513672C10.537552833862305,1.9999980926513672,12.999982833862305,4.462408092651367,12.999982833862305,7.499958092651367C12.999982833862305,8.838688092651367,12.521682833862304,10.065698092651367,11.726632833862304,11.019438092651367L11.853552833862304,11.146358092651367L13.853582833862305,13.146298092651367C13.947282833862305,13.240098092651367,13.999982833862305,13.367298092651367,13.999982833862305,13.499898092651367C13.999982833862305,13.775998092651367,13.776182833862304,13.999898092651367,13.499982833862305,13.999898092651367C13.367382833862305,13.999898092651367,13.240182833862304,13.947198092651368,13.146482833862304,13.853398092651368L11.146442833862304,11.853468092651367L11.019522833862304,11.726548092651367ZM11.999982833862305,7.499958092651367C11.999982833862305,5.014698092651367,9.985262833862304,2.999990092651367,7.499982833862305,2.999990092651367C5.014702833862305,2.999990092651367,2.9999828338623047,5.014698092651367,2.9999828338623047,7.499958092651367C2.9999828338623047,9.985218092651367,5.014702833862305,11.999918092651367,7.499982833862305,11.999918092651367C9.985262833862304,11.999918092651367,11.999982833862305,9.985218092651367,11.999982833862305,7.499958092651367Z"
                                                fill-rule="evenodd" fill="#A6A6B2" fill-opacity="1" />
                                        </g>
                                    </g>
                                </svg>
                            </ng-template>
                            <nz-tree *ngIf="this[tab.tree]" #treeComponent [nzData]="this[tab.tree]" [nzSearchValue]="keyword"
                                [nzExpandedKeys]="calcFieldExpandedKeys" nzCheckable nzBlockNode nzMultiple nzHideUnMatched nzCheckStrictly
                                [nzTreeTemplate]="treeTemplate" nzVirtualHeight="calc(100vh - 360px)" nzVirtualItemSize="32px" [nzVirtualMaxBufferPx]="200" [nzVirtualMinBufferPx]="100"
                                [nzCheckedKeys]="this[tab.data]" (nzCheckBoxChange)="changeTreeCheckedKeys($event, tab.data)">
                                <ng-template #treeTemplate let-node>
                                    <app-tree-node [node]="node" [keyword]="keyword"></app-tree-node>
                                </ng-template>
                            </nz-tree>
                        </div>
                    </ng-template>
                </nz-tabset>
            </div>
            <div class="drag-handle" (mousedown)="startDrag($event)"></div>
            <div class="right">
                <ng-container *ngFor="let tab of tabList">
                    <div class="title_line">{{ tab.title }}({{this[tab.data].length}})</div>
                    <div class="right_content">
                        <div *ngIf="this[tab.data].length; else emptyTpl" class="tags">
                            <nz-tag *ngFor="let tag of this[tab.data + 'Child']; let index = index;" nzMode="closeable"
                                (nzOnClose)="delTreeCheckedKeys(index, tab.data)">{{ tag.origin.columnName }}</nz-tag>
                        </div>
                        <ng-template #emptyTpl>
                            <app-empty-data [text]="'暂无内容，请先在左侧勾选' + tab.title"></app-empty-data>
                        </ng-template>
                    </div>
                </ng-container>
                <div class="title_line">条件设定</div>
                <form class="setting_form" nz-form [formGroup]="settingForm">
                    <nz-form-item>
                        <nz-form-label nzRequired nzFor="group">是否分组</nz-form-label>
                        <nz-form-control>
                            <!--                            <nz-select formControlName="group" id="group" nzPlaceHolder="请选择">-->
                            <!--                                <nz-option [nzValue]="true" nzLabel="是"></nz-option>-->
                            <!--                                <nz-option [nzValue]="false" nzLabel="否"></nz-option>-->
                            <!--                            </nz-select>-->
                            <nz-radio-group formControlName="group" id="group">
                                <label nz-radio [nzValue]="true">是</label>
                                <label nz-radio [nzValue]="false">否</label>
                            </nz-radio-group>
                        </nz-form-control>
                    </nz-form-item>
                    <ng-template #suffixIcon>
                        <svg fill="none" width="16" height="16.0001220703125" viewBox="0 0 16 16.0001220703125">
                            <defs>
                                <clipPath id="master_svg0_6_026370/2_48108">
                                    <rect x="0" y="0" width="16" height="16.0001220703125" rx="0" />
                                </clipPath>
                            </defs>
                            <g clip-path="url(#master_svg0_6_026370/2_48108)">
                                <g>
                                    <path
                                        d="M12,2C13.1046,2,14,2.895431,14,4L14,12C14,13.1046,13.1046,14,12,14L4,14C2.895431,14,2,13.1046,2,12L2,4C2,2.895431,2.895431,2,4,2L12,2ZM12,3L4,3C3.44772,3,3,3.44772,3,4L3,12C3,12.5523,3.44772,13,4,13L12,13C12.5523,13,13,12.5523,13,12L13,4C13,3.44772,12.5523,3,12,3ZM7.44416,4.6541999999999994C7.2489,4.45894,6.93232,4.45894,6.73705,4.6541999999999994L6.6792,4.72345C6.5442,4.91831,6.56349,5.18774,6.73705,5.3613L9.383610000000001,8.00775L6.73705,10.6542C6.54179,10.84946,6.54179,11.16604,6.73705,11.36131C6.93232,11.55657,7.2489,11.55657,7.44416,11.36131L10.44416,8.3613C10.63942,8.166039999999999,10.63942,7.84946,10.44416,7.6542L7.44416,4.6541999999999994Z"
                                        fill="#A6A6B2" fill-opacity="1" />
                                </g>
                            </g>
                        </svg>
                    </ng-template>
                    <nz-form-item>
                        <nz-form-label>排序字段</nz-form-label>
                        <nz-form-control>
                            <nz-input-group class="sort" [nzSuffix]="suffixIcon" (click)="openSortModule()">
                                <ng-container *ngIf="selectedSortList?.length">
                                    <nz-tag nzMode="closeable" (nzOnClose)="delSelectedSortField($event)">
                                        <span>{{ selectedSortList[0]._title }}</span>
                                    </nz-tag>
                                    <nz-tag *ngIf="selectedSortList?.length > 1">共{{ selectedSortList.length }}项</nz-tag>
                                </ng-container>
                                <input *ngIf="!selectedSortList?.length" type="text" nz-input placeholder="请选择" />
                            </nz-input-group>
                        </nz-form-control>
                    </nz-form-item>
                    <nz-form-item>
                        <nz-form-label nzRequired nzFor="pageSize">每页笔数</nz-form-label>
                        <nz-form-control nzErrorTip="请输入每页笔数">
                            <nz-input-number formControlName="pageSize" id="pageSize" nzPlaceHolder="请输入" [nzMin]="0"
                                [nzMax]="100" [nzPrecision]="0"></nz-input-number>
                        </nz-form-control>
                    </nz-form-item>
                    <nz-form-item>
                        <nz-form-label nzRequired nzFor="pageType">分页方式</nz-form-label>
                        <nz-form-control nzErrorTip="请选择分页方式">
                            <nz-radio-group formControlName="pageType" id="pageType">
                                <label nz-radio nzValue="ALL">明细分页</label>
                                <label nz-radio nzValue="M">整单分页</label>
                            </nz-radio-group>
                            <!--                            <nz-select formControlName="pageType" id="pageType" nzPlaceHolder="请选择" nzAllowClear>-->
                            <!--                                <nz-option nzValue="ALL" nzLabel="明细分页"></nz-option>-->
                            <!--                                <nz-option nzValue="M" nzLabel="整单分页"></nz-option>-->
                            <!--                            </nz-select>-->
                        </nz-form-control>
                    </nz-form-item>
                    <nz-form-item>
                        <nz-form-label>固定条件</nz-form-label>
                        <nz-form-control>
                            <nz-input-group class="condition" [nzSuffix]="suffixIcon" (click)="openFixedModule()">
                                <input type="text" nz-input placeholder="请选择"
                                    [value]="selectedConditions?.length ? '已添加(' + selectedConditions.length + ')' : ''" />
                            </nz-input-group>
                        </nz-form-control>
                    </nz-form-item>
                </form>
            </div>
        </div>
    </div>

    <!-- 排序字段弹窗 -->
    <nz-modal [(nzVisible)]="sortVisible" nzWidth="820px" nzTitle="字段排序" (nzOnCancel)="handleSortCancel()">
        <div *nzModalContent>
            <div class="sort_wrap">
                <div class="sort_left_wrap">
                    <div class="sort_left_header">
                        <span class="left_title_line"></span>
                        <span class="left_title">所有字段</span>
                    </div>
                    <div class="sort_left_main">
                        <nz-input-group [nzSuffix]="suffixIcon" class="input_text">
                            <input type="text" nz-input placeholder="请输入关键词" nzSize="small" [(ngModel)]="searchNodeValue" />
                        </nz-input-group>
                        <ng-template #suffixIcon>
                            <i nz-icon nzType="search"></i>
                        </ng-template>
                        <nz-tree #treeSort [nzData]="sortFieldNodes" nzCheckable nzMultiple nzHideUnMatched nzCheckStrictly
                            [nzCheckedKeys]="defaultCheckedKeys" (nzCheckBoxChange)="changeSortTreeCheckedKeys($event)"
                            [nzTreeTemplate]="treeSortTemplate" [nzSearchValue]="searchNodeValue" nzVirtualHeight="350px">
                            <ng-template #treeSortTemplate let-node>
                                <app-tree-node [node]="node" [keyword]="searchNodeValue"></app-tree-node>
                            </ng-template>
                        </nz-tree>
                    </div>
                </div>
                <div class="sort_right_wrap">
                    <div class="sort_right_header">
                        <span class="left_title_line"></span>
                        <span class="left_title">已选字段（{{sortNodeChildList.length}}）</span>
                    </div>
                    <div class="sort_right_main">
                        <div class="no_wrap" *ngIf="sortNodeChildList.length==0">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                fill="none" version="1.1" width="104" height="104" viewBox="0 0 104 104">
                                <defs>
                                    <linearGradient x1="0.5" y1="0" x2="0.49897881669271366" y2="1.0107587602642332"
                                        id="master_svg0_6_027858">
                                        <stop offset="0%" stop-color="#FFFFFF" stop-opacity="1" />
                                        <stop offset="99.6399998664856%" stop-color="#E6E6EB" stop-opacity="1" />
                                    </linearGradient>
                                </defs>
                                <g>
                                    <g></g>
                                    <g>
                                        <g>
                                            <path
                                                d="M84.946940625,52.09810942382812L84.946940625,78.17030942382812C84.946940625,83.58700942382814,80.541340625,87.99260942382813,75.052440625,87.99260942382813L29.263580625,87.99260942382813C23.846920625,87.99260942382813,19.441362825,83.65920942382812,19.369140625,78.24260942382813C19.369140625,78.17030942382812,19.369140625,78.17030942382812,19.369140625,78.09810942382813L19.369140625,52.09810942382812C19.369140625,52.025909423828125,19.369140625,52.025909423828125,19.369140625,51.95370942382813C19.369140625,51.80920942382812,19.369140625,51.664809423828125,19.441362825,51.520309423828124C19.513584625,51.303709423828124,19.585807625,51.15920942382812,19.658029625,50.942609423828124L31.935840625,27.470349423828125C32.369140625,26.531465423828124,33.308040625000004,26.025909423828125,34.319140625,26.025909423828125L69.924740625,26.025909423828125C70.935840625,26.025909423828125,71.802440625,26.531465423828124,72.30804062499999,27.470349423828125L84.585840625,50.942609423828124C84.658040625,51.08700942382812,84.730240625,51.303709423828124,84.802440625,51.520309423828124C84.946940625,51.664809423828125,84.946940625,51.88150942382812,84.946940625,52.09810942382812Z"
                                                fill="#E6E6EB" fill-opacity="1" />
                                        </g>
                                        <g>
                                            <path
                                                d="M84.946940625,52.09801115429688L84.946940625,80.84243315429687C84.946940625,84.81463315429687,81.769140625,87.99243315429688,77.72474062500001,87.99243315429688L26.591360625,87.99243315429688C22.619140625,87.99243315429688,19.369140625,84.81463315429687,19.369140625,80.84243315429687L19.369140625,51.95356615429687C19.369140625,51.80912215429687,19.369140625,51.664677154296875,19.441362825,51.520233154296875L35.908040625,51.520233154296875C38.363540625,51.520233154296875,40.385840625,53.47023315429688,40.385840625,55.99801315429688C40.385840625,57.22579315429687,40.891340625,58.38134315429687,41.685840625,59.175793154296876C42.552440625,60.04245315429688,43.563540625,60.47578315429688,44.863540625,60.47578315429688L59.524740625,60.47578315429688C61.980240625,60.47578315429688,64.00244062499999,58.52579315429688,64.00244062499999,55.99801315429688C64.00244062499999,54.770233154296875,64.508040625,53.614673154296874,65.302440625,52.82023315429687C66.169140625,51.95356615429687,67.18024062500001,51.520233154296875,68.408040625,51.520233154296875L84.802440625,51.520233154296875C84.946940625,51.664677154296875,84.946940625,51.881344154296876,84.946940625,52.09801115429688Z"
                                                fill="url(#master_svg0_6_027858)" fill-opacity="1" />
                                        </g>
                                        <g>
                                            <path
                                                d="M93.888844375,37.29236770507813C95.523954375,37.29236770507813,96.849954375,35.96347770507813,96.849954375,34.33125770507812C96.849954375,32.699037705078126,95.523954375,31.370147705078125,93.888844375,31.370147705078125C92.253014375,31.370147705078125,90.927734375,32.699037705078126,90.927734375,34.33125770507812C90.927734375,35.96347770507813,92.253014375,37.29236770507813,93.888844375,37.29236770507813Z"
                                                fill="#F0F0F5" fill-opacity="1" />
                                        </g>
                                        <g>
                                            <path
                                                d="M90.9274934375,27.687048642578127C92.0440534375,27.687048642578127,92.9497134375,26.784278642578126,92.9497134375,25.664828642578126C92.9497134375,24.545386642578126,92.0440534375,23.642608642578125,90.9274934375,23.642608642578125C89.8102174375,23.642608642578125,88.9052734375,24.545386642578126,88.9052734375,25.664828642578126C88.9052734375,26.784278642578126,89.8102174375,27.687048642578127,90.9274934375,27.687048642578127Z"
                                                fill="#F0F0F5" fill-opacity="1" />
                                        </g>
                                        <g>
                                            <path
                                                d="M9.028079375,34.33136626953125C10.144639375,34.33136626953125,11.050299375,33.42859626953125,11.050299375,32.30914626953125C11.050299375,31.18970426953125,10.144639375,30.28692626953125,9.028079375,30.28692626953125C7.910803375,30.28692626953125,7.005859375,31.18970426953125,7.005859375,32.30914626953125C7.005859375,33.42859626953125,7.910803375,34.33136626953125,9.028079375,34.33136626953125Z"
                                                fill="#F0F0F5" fill-opacity="1" />
                                        </g>
                                        <g>
                                            <path
                                                d="M8.23376625,75.06467254882813Q8.23376625,75.24916254882812,8.215686250000001,75.43277254882813Q8.19759625,75.61638254882813,8.16160625,75.79734254882813Q8.12560625,75.97829254882812,8.07205625,76.15485254882813Q8.01849625,76.33140254882812,7.94789625,76.50185254882813Q7.87728625,76.67231254882813,7.79031625,76.83502254882812Q7.70334625,76.99773254882813,7.60083625,77.15114254882812Q7.49833625,77.30455254882813,7.38129625,77.44716254882812Q7.26424625,77.58978254882813,7.13378625,77.72024254882812Q7.00332625,77.85070254882812,6.86070625,77.96775254882813Q6.71809625,78.08479254882812,6.56468625,78.18729254882813Q6.41128625,78.28980254882812,6.24856625,78.37677254882813Q6.08585625,78.46374254882812,5.91539625,78.53434254882812Q5.74494625,78.60495254882812,5.56839625,78.65851254882813Q5.39183625,78.71206254882813,5.21088625,78.74806254882813Q5.02992625,78.78405254882813,4.84631625,78.80214254882813Q4.662706249999999,78.82022254882813,4.47821625,78.82022254882813Q4.29371625,78.82022254882813,4.110106249999999,78.80214254882813Q3.92649625,78.78405254882813,3.74553625,78.74806254882813Q3.56458625,78.71206254882813,3.38803625,78.65851254882813Q3.21147625,78.60495254882812,3.04102625,78.53435254882812Q2.87056625,78.46374254882812,2.70785625,78.37677254882813Q2.54514625,78.28980254882812,2.39173625,78.18729254882813Q2.2383362499999997,78.08479254882812,2.0957162499999997,77.96775254882813Q1.95309625,77.85070254882812,1.82263625,77.72024254882812Q1.69217225,77.58978254882813,1.5751282500000001,77.44716254882812Q1.45808325,77.30455254882813,1.35558125,77.15114254882812Q1.2530792499999999,76.99774254882813,1.16610725,76.83502254882812Q1.07913525,76.67231254882813,1.0085312499999999,76.50185254882813Q0.93792625,76.33140254882812,0.88436925,76.15485254882813Q0.83081225,75.97829254882812,0.79481815,75.79734254882813Q0.75882435,75.61638254882813,0.74074025,75.43277254882813Q0.72265625,75.24916254882812,0.72265625,75.06467254882813Q0.72265625,74.88017254882813,0.74074025,74.69656254882813Q0.75882435,74.51295254882812,0.79481815,74.33199254882813Q0.83081225,74.15104254882813,0.88436925,73.97449254882812Q0.93792625,73.79793254882813,1.0085312499999999,73.62748254882813Q1.07913525,73.45702254882812,1.16610725,73.29431254882813Q1.2530792499999999,73.13160254882813,1.35558125,72.97819254882812Q1.45808325,72.82479254882813,1.5751282500000001,72.68217254882812Q1.69217225,72.53955254882813,1.82263625,72.40909254882813Q1.95309625,72.27862854882812,2.0957162499999997,72.16158454882813Q2.2383362499999997,72.04453954882813,2.39173625,71.94203754882813Q2.54514625,71.83953554882812,2.70785625,71.75256354882812Q2.87056625,71.66559154882812,3.04102625,71.59498754882813Q3.21147625,71.52438254882813,3.38803625,71.47082554882813Q3.56458625,71.41726854882812,3.74553625,71.38127444882812Q3.92649625,71.34528064882812,4.110106249999999,71.32719654882813Q4.29371625,71.30911254882812,4.47821625,71.30911254882812Q4.662706249999999,71.30911254882812,4.84631625,71.32719654882813Q5.02992625,71.34528064882812,5.21088625,71.38127444882812Q5.39183625,71.41726854882812,5.56839625,71.47082554882813Q5.74494625,71.52438254882813,5.91539625,71.59498754882813Q6.08585625,71.66559154882812,6.24856625,71.75256354882812Q6.41127625,71.83953554882812,6.56468625,71.94203754882813Q6.71809625,72.04453954882813,6.86070625,72.16158454882813Q7.00332625,72.27862854882812,7.13378625,72.40909254882813Q7.26424625,72.53955254882813,7.38129625,72.68217254882812Q7.49833625,72.82479254882813,7.60083625,72.97819254882812Q7.70334625,73.13160254882813,7.79031625,73.29431254882813Q7.87728625,73.45702254882812,7.94788625,73.62748254882813Q8.01849625,73.79793254882813,8.07205625,73.97449254882812Q8.12560625,74.15104254882813,8.16160625,74.33199254882813Q8.19759625,74.51295254882812,8.215686250000001,74.69656254882813Q8.23376625,74.88017254882813,8.23376625,75.06467254882813Z"
                                                fill="#F0F0F5" fill-opacity="1" />
                                        </g>
                                        <g>
                                            <path
                                                d="M71.0915078125,18.836092861328126L70.9465078125,17.270829861328124L69.5083078125,17.404035861328126L69.6532078125,18.969302861328124L71.0915078125,18.836092861328126ZM71.6104078125,24.796992861328125Q71.5283078125,23.593592861328126,71.3647078125,21.780242861328126L69.92610781249999,21.910052861328126Q70.0883078125,23.707752861328125,70.1693078125,24.895282861328127L71.6104078125,24.796992861328125ZM71.6643078125,30.709232861328125Q71.7611078125,29.292632861328123,71.7415078125,27.792332861328127L70.2972078125,27.811232861328126Q70.3160078125,29.252732861328127,70.2232078125,30.610632861328124L71.6643078125,30.709232861328125ZM70.8015078125,36.72943286132812Q71.1233078125,35.12843286132812,71.3248078125,33.77713286132813L69.8962078125,33.56403286132813Q69.7000078125,34.87943286132813,69.3854078125,36.44483286132812L70.8015078125,36.72943286132812ZM59.7138478125,35.082932861328125Q58.387147812500004,34.00773286132812,56.5844878125,33.83193286132813L56.4443178125,35.26963286132813Q57.8149578125,35.40323286132812,58.8044278125,36.205132861328124L59.7138478125,35.082932861328125ZM52.9247678125,34.66973286132813Q51.6896298125,35.55953286132812,51.0399518125,37.049132861328125L52.3639578125,37.626632861328126Q52.8503178125,36.511432861328124,53.7505778125,35.85513286132813Q53.8508478125,35.792932861328126,53.9557078125,35.73673286132812L53.2730078125,34.46383286132813Q53.1141078125,34.54903286132813,52.9624478125,34.644332861328124L52.9432078125,34.65643286132813L52.9247678125,34.66973286132813ZM62.5868078125,40.78953286132813Q62.4814078125,39.068832861328126,61.779807812499996,37.62933286132812L60.4813878125,38.262132861328126Q61.0572278125,39.443632861328126,61.1450178125,40.87773286132813L62.5868078125,40.78953286132813ZM70.06610781250001,39.90523286132812Q70.0985078125,39.807932861328126,70.11530781249999,39.75773286132812L68.7449078125,39.30113286132813Q68.7294078125,39.347532861328126,68.6956078125,39.44903286132812Q68.1083078125,41.21313286132812,67.7492078125,42.05353286132812L69.0775078125,42.621032861328125Q69.4600078125,41.72583286132813,70.06610781250001,39.90523286132812ZM50.6562888125,41.22383286132812Q50.8624358125,42.36963286132813,51.3510498125,43.44193286132813L52.6654678125,42.843032861328126Q52.2482478125,41.92743286132813,52.0747798125,40.950632861328124L52.0710618125,40.92963286132812L52.0661178125,40.908932861328125Q51.9837348125,40.564332861328126,51.9511288125,40.20163286132812L50.5124878125,40.331032861328126Q50.5535028125,40.78723286132812,50.6562888125,41.22383286132812ZM61.2540078125,46.93273286132813Q61.9497078125,45.44073286132813,62.2919078125,43.95893286132812L60.884507812500004,43.63393286132813Q60.576437812500004,44.96783286132813,59.9448878125,46.322232861328125L61.2540078125,46.93273286132813ZM67.1707078125,45.703232861328125Q67.3164078125,45.54753286132812,67.4559078125,45.38073286132813L66.3477078125,44.45413286132813Q66.2290078125,44.596232861328126,66.1054078125,44.727632861328125L66.09220781249999,44.741532861328125L66.07980781250001,44.75623286132813Q65.3448078125,45.625932861328124,64.2938078125,46.26153286132812L65.0412078125,47.497532861328125Q66.2864078125,46.744532861328125,67.1707078125,45.703232861328125ZM53.1556778125,46.104532861328124Q54.3002678125,47.30183286132812,55.7483378125,48.02273286132812L56.392027812500004,46.72963286132813Q55.1699478125,46.12133286132813,54.1997978125,45.10643286132812L53.1556778125,46.104532861328124ZM58.8518878125,48.91183286132812Q60.4402778125,49.06763286132812,62.0624078125,48.69503286132813L61.7391078125,47.28723286132812Q60.3466378125,47.60703286132812,58.9928178125,47.47433286132812L58.8518878125,48.91183286132812ZM58.1217778125,52.15223286132812Q58.9994278125,50.973132861328125,59.7316078125,49.73823286132812L58.4891378125,49.00153286132813Q57.7955578125,50.171332861328125,56.9630878125,51.289732861328126L58.1217778125,52.15223286132812ZM54.5363678125,56.83823286132812Q55.3949878125,55.657432861328125,56.3729278125,54.40413286132812L55.2341478125,53.515532861328126Q54.2411278125,54.78813286132812,53.3681178125,55.988732861328124L54.5363678125,56.83823286132812ZM51.9622788125,60.547632861328125L52.8471078125,59.23693286132813L51.6499198125,58.42873286132812L50.7650878125,59.739432861328126L51.9622788125,60.547632861328125Z"
                                                fill-rule="evenodd" fill="#A6A6B2" fill-opacity="1" />
                                        </g>
                                        <g>
                                            <path
                                                d="M75.7543896875,13.502436220703125C75.3773896875,14.881876220703125,73.8701196875,15.380206220703126,72.3628396875,14.506316220703125C70.7298946875,13.755206220703124,69.5996166875,13.126876220703124,69.8502277875,11.877436220703125C70.2272276875,10.627987220703124,71.7345096875,10.505209220703126,73.4931196875,10.382431620703125C75.6287296875,10.129654220703125,76.0057296875,12.130206220703124,75.7543896875,13.502436220703125Z"
                                                fill="#E6E6EB" fill-opacity="1" />
                                        </g>
                                        <g>
                                            <path
                                                d="M63.570449875,14.751993486328125C64.198783875,15.878653486328126,65.957396875,16.629773486328126,67.213336875,15.503103486328126C68.594946875,14.253653486328124,69.725226875,13.379773486328125,69.097616875,12.130324486328124C68.469286875,11.003658486328124,67.464676875,11.379213886328126,65.329056875,11.631991486328126C63.570449875,12.007547486328125,62.816449875,13.502543486328126,63.570449875,14.751993486328125Z"
                                                fill="#E6E6EB" fill-opacity="1" />
                                        </g>
                                        <g>
                                            <path
                                                d="M69.09712375,10.129689301953125C69.97606375,10.006911501953125,70.85573375,10.505244501953126,71.10706375,11.256354501953124C71.23273375,11.501914501953125,71.35840375,11.877464501953124,71.35840375,12.130244501953126C71.60901375,13.878024501953124,70.98140375,15.380244501953126,69.97606375,15.503024501953124C68.84578375,15.755804501953126,67.71551075,14.506354501953126,67.58984375,12.881354501953124C67.58984375,12.375804501953125,67.58984375,12.130244501953126,67.58984375,11.754684501953125C67.71551075,10.880800501953125,68.21745475,10.252467501953126,69.09712375,10.129689301953125C69.22278375,10.129689301953125,69.09712375,10.129689301953125,69.09712375,10.129689301953125Z"
                                                fill="#A6A6B2" fill-opacity="1" />
                                        </g>
                                    </g>
                                    <g>
                                        <path
                                            d="M39,72.5833219921875C39,73.9793719921875,40.13172,75.1111019921875,41.52778,75.1111019921875L63.1944,75.1111019921875C64.59049999999999,75.1111019921875,65.7222,73.9793719921875,65.7222,72.5833219921875C65.7222,71.1872619921875,64.59049999999999,70.0555419921875,63.1944,70.0555419921875L41.52778,70.0555419921875C40.13172,70.0555419921875,39,71.1872619921875,39,72.5833219921875Z"
                                            fill="#DFDFE5" fill-opacity="1" />
                                    </g>
                                </g>
                            </svg>
                            <div class="tip_text">暂无内容，请先在左侧勾选需要配置的字段</div>
                        </div>
                        <div *ngIf="sortNodeChildList.length>0">
                            <div class="field_list" *ngFor="let order of sortNodeChildList;let i = index; ">
                                <div class="field_item">
                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                        fill="none" version="1.1" width="16" height="16" viewBox="0 0 16 16">
                                        <g>
                                            <g>
                                                <path
                                                    d="M7,4C7,4.55228,6.55228,5,6,5C5.447715,5,5,4.55228,5,4C5,3.447715,5.447715,3,6,3C6.55228,3,7,3.447715,7,4ZM7,8C7,8.55228,6.55228,9,6,9C5.447715,9,5,8.55228,5,8C5,7.44772,5.447715,7,6,7C6.55228,7,7,7.44772,7,8ZM7,12C7,12.55229,6.55228,13,6,13C5.447715,13,5,12.55229,5,12C5,11.44771,5.447715,11,6,11C6.55228,11,7,11.44771,7,12ZM11,4C11,4.55228,10.55228,5,10,5C9.44772,5,9,4.55228,9,4C9,3.447715,9.44772,3,10,3C10.55228,3,11,3.447715,11,4ZM11,8C11,8.55228,10.55228,9,10,9C9.44772,9,9,8.55228,9,8C9,7.44772,9.44772,7,10,7C10.55228,7,11,7.44772,11,8ZM11,12C11,12.55229,10.55228,13,10,13C9.44772,13,9,12.55229,9,12C9,11.44771,9.44772,11,10,11C10.55228,11,11,11.44771,11,12Z"
                                                    fill="#1D1C33" fill-opacity="1" />
                                            </g>
                                        </g>
                                    </svg>
                                    <div class="field_item_title">{{order._title}}</div>
                                </div>
                                <div class="field_item">
                                    <div class="field_item_btn">
                                        <div class="asce_order" (click)="descNodeEvent(i,false)"
                                            [ngClass]="!order.origin.desc?'order_active':''">升序
                                        </div>
                                        <div class="desc_order" (click)="descNodeEvent(i,true)"
                                            [ngClass]="order.origin.desc?'order_active' :''">降序</div>
                                    </div>
                                    <div class="move_item_btn">
                                        <div class="move_order" style="margin-right: 5px;"
                                            (click)="moveNodeEvent(i,'up')">上移
                                        </div>
                                        <div class="move_order" (click)="moveNodeEvent(i,'down')">下移</div>
                                    </div>
                                    <svg class="delete_hover" (click)="deleteCuurentNode(order,i)"
                                        xmlns=" http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                        fill="none" version="1.1" width="16" height="16" viewBox="0 0 16 16">
                                        <g>
                                            <g>
                                                <path
                                                    d="M13.5,4L11,4C11,3.94626,10.99134,3.8928700000000003,10.97434,3.8418900000000002L10.47434,2.341886C10.40628,2.137715,10.21522,2.0000000298023,10,2L6,2C5.78478,2,5.593719999999999,2.137715,5.52566,2.341886L5.0258199999999995,3.8414099999999998L5.0258199999999995,3.8414099999999998C5.00866,3.8928700000000003,5,3.94626,5,4L2.5,4C2.223858,4,2,4.22386,2,4.5C2,4.77614,2.223858,5,2.5,5L3.5,5L3.5,12.5Q3.5,13.1213,3.93934,13.5607Q4.37868,14,5,14L11,14Q11.62132,14,12.0607,13.5607Q12.5,13.1213,12.5,12.5L12.5,5L13.5,5C13.7761,5,14,4.77614,14,4.5C14,4.22386,13.7761,4,13.5,4ZM9.63962,3L9.97295,4L6.02705,4L6.36038,3L9.63962,3ZM4.5,12.5L4.5,5L11.5,5L11.5,12.5Q11.5,13,11,13L5,13Q4.5,13,4.5,12.5ZM7,6C6.72386,6,6.5,6.22386,6.5,6.5L6.5,11C6.5,11.27614,6.72386,11.5,7,11.5C7.27614,11.5,7.5,11.27614,7.5,11L7.5,6.5C7.5,6.22386,7.27614,6,7,6ZM9,6C8.72386,6,8.5,6.22386,8.5,6.5L8.5,11C8.5,11.27614,8.72386,11.5,9,11.5C9.27614,11.5,9.5,11.27614,9.5,11L9.5,6.5C9.5,6.22386,9.27614,6,9,6Z"
                                                    fill-rule="evenodd" fill="#8C8B99" fill-opacity="1" />
                                            </g>
                                        </g>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div *nzModalFooter>
            <button nz-button nzType="default" (click)="handleSortCancel()">取消</button>
            <button nz-button nzType="primary" (click)="handleeSortOk()" class="submit_btn">确定</button>
        </div>
    </nz-modal>

    <!-- 固定条件弹窗 -->
    <nz-modal [(nzVisible)]="fixedVisible" [nzWidth]="1100" nzTitle="条件" (nzOnCancel)="handleFixedCancel()">
        <div *nzModalContent class="cond_wrap">
            <div class="add_wrap">
                <div class="add_btn" (click)="addRow()">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none"
                        version="1.1" width="16" height="16" viewBox="0 0 16 16">
                        <g>
                            <g>
                                <path
                                    d="M8,2C7.72386,2,7.5,2.223858,7.5,2.5L7.5,7.5L2.5,7.5C2.223858,7.5,2,7.72386,2,8C2,8.27614,2.223858,8.5,2.5,8.5L7.5,8.5L7.5,13.5C7.5,13.7761,7.72386,14,8,14C8.27614,14,8.5,13.7761,8.5,13.5L8.5,8.5L13.5,8.5C13.7761,8.5,14,8.27614,14,8C14,7.72386,13.7761,7.5,13.5,7.5L8.5,7.5L8.5,2.5C8.5,2.223858,8.27614,2,8,2Z"
                                    fill="#1D1C33" fill-opacity="1" />
                            </g>
                        </g>
                    </svg>
                    <span class="add_title">添加条件</span>
                </div>
            </div>
            <ng-template #nzNoResult>
                <app-empty-data text="暂无数据，点击右上角按钮【添加条件】"></app-empty-data>
            </ng-template>
            <div class="table">
                <nz-table #editRowTable #borderedTable nzBordered [nzData]="fixedConditionsList" nzSize="small"
                    [nzFrontPagination]="false" [nzNoResult]="nzNoResult">
                    <thead>
                        <tr>
                            <th nzWidth="50px">序号</th>
                            <th nzWidth="80px">左扩</th>
                            <th nzWidth="250px">字段</th>
                            <th nzWidth="100px">条件</th>
                            <th nzWidth="100px">参数类型</th>
                            <th nzWidth="200px">值</th>
                            <th nzWidth="80px">右扩</th>
                            <th nzWidth="50px">逻辑</th>
                            <th nzWidth="50px">操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let data of editRowTable.data;let it = index" class="editable-row">
                            <ng-container *ngIf="data.isDelete==1">
                                <!-- 列内容 -->
                                <td>{{it+1}}</td>
                                <td>
                                    <nz-select style="width: 70px;" nzAllowClear nzPlaceHolder=""
                                        [(ngModel)]="data.leftExpand">
                                        <nz-option nzLabel="(" nzValue="("></nz-option>
                                        <nz-option nzLabel="((" nzValue="(("></nz-option>
                                        <nz-option nzLabel="(((" nzValue="((("></nz-option>
                                        <nz-option nzLabel="((((" nzValue="(((("></nz-option>
                                        <nz-option nzLabel="(((((" nzValue="((((("></nz-option>
                                        <nz-option nzLabel="((((((" nzValue="(((((("></nz-option>
                                    </nz-select>
                                </td>
                                <td>
                                    <nz-tree-select #treeSelectComponent [nzId]="'treeSelect_' +(it+10)"
                                        style="width: 250px;" [(ngModel)]="data.fieldName" [nzNodes]="fieldNodes"
                                        nzPlaceHolder="" nzShowSearch [nzDropdownStyle]="{ 'max-height': '240px' }"
                                        (ngModelChange)="changeWhereNode($event,it)" [nzHideUnMatched]="true">
                                        <ng-template #nzTreeTemplate let-node>
                                            <span class="ant-tree-node-content-wrapper"
                                                [class.ant-tree-node-selected]="node.isSelected">
                                                <span *ngIf="!node.isLeaf" class="node_title_wrap">
                                                    <svg xmlns="http://www.w3.org/2000/svg"
                                                        xmlns:xlink="http://www.w3.org/1999/xlink" fill="none"
                                                        version="1.1" width="16" height="16" viewBox="0 0 16 16">
                                                        <g>
                                                            <g>
                                                                <path
                                                                    d="M13,2C13.5523,2,14,2.447715,14,3L14,13C14,13.5523,13.5523,14,13,14L3,14C2.447715,14,2,13.5523,2,13L2,3C2,2.447715,2.447715,2,3,2L13,2ZM13,3L3,3L3,5.0136400000000005L13,5.0136400000000005L13,3ZM13,6.01364L10.51752,6.01364L10.51752,9.02095L13,9.02095L13,6.01364ZM13,10.02095L10.51752,10.02095L10.51752,13L13,13L13,10.02095ZM9.517520000000001,13L9.517520000000001,10.02095L6.51441,10.02095L6.51441,13L9.517520000000001,13ZM5.51441,13L5.51441,10.02095L3,10.02095L3,13L5.51441,13ZM3,9.02095L5.51441,9.02095L5.51441,6.01364L3,6.01364L3,9.02095ZM6.51441,9.02095L9.517520000000001,9.02095L9.517520000000001,6.01364L6.51441,6.01364L6.51441,9.02095Z"
                                                                    fill="#1D1C33" fill-opacity="1" />
                                                            </g>
                                                        </g>
                                                    </svg>
                                                    <span class="folder-name node_ellipsis_filed">{{
                                                        node.title
                                                        }}</span>
                                                </span>
                                                <span *ngIf="node.isLeaf" class="node_title_wrap">
                                                    <svg xmlns="http://www.w3.org/2000/svg"
                                                        xmlns:xlink="http://www.w3.org/1999/xlink" fill="none"
                                                        version="1.1" width="16" height="16.000244140625"
                                                        viewBox="0 0 16 16.000244140625">
                                                        <g>
                                                            <g>
                                                                <path
                                                                    d="M2,3.5L2,12.5Q2,13.1213,2.43934,13.5607Q2.87868,14,3.5,14L12.5,14Q13.1213,14,13.5607,13.5607Q14,13.1213,14,12.5L14,3.5Q14,2.878679,13.5607,2.43934Q13.1213,2,12.5,2L3.5,2Q2.87868,2,2.43934,2.43934Q2,2.87868,2,3.5ZM3.5,13Q3,13,3,12.5L3,3.5Q3,3,3.5,3L12.5,3Q13,3,13,3.5L13,12.5Q13,13,12.5,13L3.5,13ZM5.52999,5.209960000000001C6.12999,4.44996,6.99999,4.07996,8.139990000000001,4.07996C8.97999,4.07996,9.67999,4.29999,10.21999,4.739990000000001C10.73999,5.1599900000000005,11.04999,5.73996,11.15999,6.45996L10.01999,6.45996C9.899989999999999,5.98996,9.67999,5.6499299999999995,9.34999,5.429930000000001C9.02999,5.20993,8.61999,5.10999,8.11999,5.10999C7.36999,5.10999,6.80999,5.359999999999999,6.42999,5.88C6.07999,6.34,5.9099900000000005,6.97993,5.9099900000000005,7.79993C5.9099900000000005,8.63993,6.07999,9.28999,6.41999,9.739989999999999C6.78999,10.21999,7.36999,10.46997,8.149989999999999,10.46997C8.65999,10.46997,9.079989999999999,10.33998,9.399989999999999,10.09998C9.739989999999999,9.829979999999999,9.97999,9.42,10.11999,8.879999999999999L11.25999,8.879999999999999C11.09999,9.72001,10.72999,10.36997,10.13999,10.83997C9.58999,11.27997,8.92999,11.5,8.15999,11.5C6.96999,11.5,6.07999,11.12,5.49999,10.38C4.989990000000001,9.74,4.739990000000001,8.87993,4.739990000000001,7.79993C4.739990000000001,6.73993,4.99999,5.86996,5.52999,5.209960000000001Z"
                                                                    fill-rule="evenodd" fill="#1D1C33"
                                                                    fill-opacity="1" />
                                                            </g>
                                                        </g>
                                                    </svg>
                                                    <span class="file-name node_ellipsis_filed">{{
                                                        node.title }}</span>
                                                </span>
                                            </span>
                                        </ng-template>
                                    </nz-tree-select>
                                </td>
                                <td>
                                    <nz-select style="width: 100px;" nzAllowClear nzPlaceHolder=""
                                        [(ngModel)]="data.condition">
                                        <nz-option nzLabel="等于" nzValue="EQ"></nz-option>
                                        <nz-option nzLabel="不等于" nzValue="NE"></nz-option>
                                        <nz-option nzLabel="大于" nzValue="GT"></nz-option>
                                        <nz-option nzLabel="大于等于" nzValue="GE"></nz-option>
                                        <nz-option nzLabel="小于" nzValue="LT"></nz-option>
                                        <nz-option nzLabel="小于等于" nzValue="LE"></nz-option>
                                        <nz-option nzLabel="为空" nzValue="ISNULL"></nz-option>
                                        <nz-option nzLabel="不为空" nzValue="ISNOTNULL"></nz-option>
                                        <nz-option nzLabel="介于" nzValue="BETWEEN"></nz-option>
                                        <nz-option nzLabel="不介于" nzValue="NOTBETWEEN"></nz-option>
                                        <nz-option nzLabel="in" nzValue="IN"></nz-option>
                                    </nz-select>
                                </td>
                                <td>
                                    <nz-select *ngIf="data.condition !=='ISNULL' && data.condition !=='ISNOTNULL'" style="width: 70px;" nzAllowClear nzPlaceHolder=""
                                        [(ngModel)]="data.whereType" (ngModelChange)="changeParamsType(it)">
                                        <nz-option nzLabel="常量" nzValue="1"></nz-option>
                                        <nz-option nzLabel="参数" *ngIf="data.condition !== 'IN'" nzValue="3"></nz-option>
                                    </nz-select>
                                </td>
                                <td>
                                    <div style="display: flex;"
                                        *ngIf="(data.condition==='EQ' || data.condition ==='NE' || data.condition === 'GT' ||
                                        data.condition ==='GE' || data.condition ==='LT' ||data.condition === 'LE') && data.whereType === '3'">
                                        <nz-select style="width: 180px;" nzAllowClear nzPlaceHolder=""
                                            [(ngModel)]="data.param">
                                            <nz-option *ngFor="let item of paramP" [nzValue]="item.columnName"
                                                [nzLabel]="item.columnName"></nz-option>
                                        </nz-select>
                                    </div>
                                    <div style="display: flex;"
                                        *ngIf="(data.condition=='BETWEEN' ||data.condition=='NOTBETWEEN')&&data.whereType==3">
                                        <nz-select style="width: 100px;" nzAllowClear nzPlaceHolder=""
                                            [(ngModel)]="data.param">
                                            <nz-option *ngFor=" let item of
                                                paramP" [nzDisabled]="data.param2 === item.columnName"
                                                [nzValue]="item.columnName" [nzLabel]="item.columnName"></nz-option>
                                        </nz-select>
                                        <nz-select style="width: 100px;" nzAllowClear nzPlaceHolder=""
                                            [(ngModel)]="data.param2">
                                            <nz-option [nzDisabled]="data.param === item.columnName" *ngFor=" let item of
                                                paramP" [nzValue]="item.columnName"
                                                [nzLabel]="item.columnName"></nz-option>
                                        </nz-select>
                                    </div>
                                    <div style="display: flex;">
                                        <input type="text"
                                            *ngIf="(data.condition=='EQ' ||data.condition=='NE' || data.condition=='GT' ||
                                    data.condition=='GE' || data.condition=='LT' || 
                                    data.condition=='LE' || data.condition=='BETWEEN' ||data.condition=='NOTBETWEEN' || data.condition=='IN')&&data.whereType==1"
                                            nz-input [(ngModel)]="data.fieldValue"
                                            [placeholder]=" data.condition=='IN'?'多个常量请用英文,分隔':''" />
                                        <input type="text"
                                            *ngIf="(data.condition=='BETWEEN' ||data.condition=='NOTBETWEEN')&& data.whereType==1"
                                            nz-input [(ngModel)]="data.fieldValue2" />
                                    </div>
                                </td>
                                <td>
                                    <nz-select style="width: 70px;" nzAllowClear nzPlaceHolder=""
                                        [(ngModel)]="data.rightExpand">
                                        <nz-option nzLabel=")" nzValue=")"></nz-option>
                                        <nz-option nzLabel="))" nzValue="))"></nz-option>
                                        <nz-option nzLabel=")))" nzValue=")))"></nz-option>
                                        <nz-option nzLabel="))))" nzValue="))))"></nz-option>
                                        <nz-option nzLabel=")))))" nzValue=")))))"></nz-option>
                                        <nz-option nzLabel="))))))" nzValue="))))))"></nz-option>
                                    </nz-select>
                                </td>
                                <td>
                                    <div class="logic" (click)="changeLogic(it,'AND')" *ngIf="data.logic=='OR'">或</div>
                                    <div class="and_box" (click)="changeLogic(it,'OR')" *ngIf="data.logic=='AND'">且
                                    </div>
                                </td>
                                <td class="oper_a">
                                    <a (click)="delteConditions(it)">删除</a>
                                </td>
                            </ng-container>
                        </tr>
                    </tbody>
                </nz-table>
            </div>
        </div>
        <div *nzModalFooter>
            <button nz-button nzType="default" (click)="handleFixedCancel()">取消</button>
            <button nz-button nzType="primary" (click)="handleeFixedOk()" class="submit_btn">确定</button>
        </div>
    </nz-modal>

    <!-- 编辑查询方案弹窗 -->
    <app-scheme-design-add *ngIf="addVisible" [isEdit]="true" [data]="routerParams" (visibleChange)="addChange(false, $event)"></app-scheme-design-add>

    <!-- 创建失败 -->
    <nz-modal [(nzVisible)]="createVisible" [nzFooter]="null" [nzClosable]="false" [nzWidth]="480" nzTitle="">
        <div *nzModalContent>
            <div class="error_wrap">
                <div class="error_header">
                    <div class="error_header_left">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none"
                            version="1.1" width="30" height="30.000244140625" viewBox="0 0 30 30.000244140625">
                            <g>
                                <g>
                                    <path
                                        d="M26.25,14.999942779541016C26.25,21.213142779541016,21.2132,26.249942779541016,15,26.249942779541016C8.7868,26.249942779541016,3.75,21.213142779541016,3.75,14.999942779541016C3.75,8.786742779541015,8.7868,3.7499427795410156,15,3.7499427795410156C21.2132,3.7499427795410156,26.25,8.786742779541015,26.25,14.999942779541016ZM10.12495,11.249992779541016C10.12495,11.548352779541016,10.24348,11.834502779541015,10.454460000000001,12.045482779541016L13.40901,15.000042779541015L10.454550000000001,17.954542779541015C10.24357,18.165442779541017,10.12505,18.451642779541018,10.12505,18.749942779541016C10.12505,19.371342779541017,10.628730000000001,19.874942779541016,11.25005,19.874942779541016C11.54841,19.874942779541016,11.83456,19.756442779541015,12.04583,19.545142779541017L15,16.591042779541016L17.9542,19.545142779541017C18.165399999999998,19.756442779541015,18.4516,19.874942779541016,18.75,19.874942779541016C19.371299999999998,19.874942779541016,19.875,19.371342779541017,19.875,18.749942779541016C19.875,18.451642779541018,19.7564,18.165442779541017,19.5455,17.954542779541015L16.591,15.000042779541015L19.5455,12.045482779541016C19.7565,11.834502779541015,19.875,11.548352779541016,19.875,11.249992779541016C19.875,10.628672779541017,19.3714,10.124992779541016,18.75,10.124992779541016C18.451700000000002,10.124992779541016,18.1655,10.243512779541016,17.9543,10.454782779541016L15,13.409042779541016L12.04574,10.454782779541016C11.83447,10.243512779541016,11.54832,10.124992779541016,11.24995,10.124992779541016C10.628630000000001,10.124992779541016,10.12495,10.628672779541017,10.12495,11.249992779541016Z"
                                        fill-rule="evenodd" fill="#EB2F2F" fill-opacity="1" />
                                </g>
                            </g>
                        </svg>
                        <span class="error_title">创建失败</span>
                    </div>
                    <div (click)="handleCreateCancel()" style="cursor: pointer;"><svg xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="20"
                            height="20.0001220703125" viewBox="0 0 20 20.0001220703125">
                            <g>
                                <g>
                                    <path
                                        d="M3.75,4.375C3.75,4.54076,3.815848,4.699731,3.933058,4.81694L9.116119999999999,10L3.933608,15.1825L3.933608,15.1825C3.8158479,15.3003,3.75,15.4592,3.75,15.625C3.75,15.9702,4.029822,16.25,4.375,16.25C4.54076,16.25,4.699731,16.1842,4.81694,16.0669L10,10.883880000000001L15.1831,16.0669C15.3003,16.1842,15.4592,16.25,15.625,16.25C15.9702,16.25,16.25,15.9702,16.25,15.625C16.25,15.4592,16.1842,15.3003,16.0669,15.1831L10.883880000000001,10L16.0669,4.81694C16.1842,4.699732,16.25,4.54076,16.25,4.375C16.25,4.029822,15.9702,3.75,15.625,3.75C15.4592,3.75,15.3003,3.815848,15.1831,3.933058L15.1831,3.933058L10,9.116119999999999L4.81694,3.933058C4.699731,3.815848,4.54076,3.75,4.375,3.75C4.029822,3.75,3.75,4.029822,3.75,4.375Z"
                                        fill="#A6A6B2" fill-opacity="1" />
                                </g>
                            </g>
                        </svg>
                    </div>
                </div>
                <div class="error_info">{{errorInfo}}</div>
            </div>
            <div class="operation_box">
                <div class="cancel" (click)="handleCreateCancel()">取消</div>
                <button nz-button nzType="primary" (click)="handleCreateCancel()" class="submit_btn">确定</button>
            </div>
        </div>
    </nz-modal>

    <!-- 调用示例 -->
    <nz-modal [(nzVisible)]="callExampleVisible" [nzFooter]="null" (nzOnCancel)="handleExampleCancel()" [nzWidth]="580"
        nzTitle="产生调用示例" nzClassName="call_example_modal">
        <div *nzModalContent>
            <div class="api_title">API名称：{{apiName}}</div>
            <div>
                <textarea [readonly]="true" rows="8" nz-input [(ngModel)]="jsonExample"></textarea>
            </div>
            <div class="operation_box">
                <div class="cancel" (click)="handleExampleCancel()">取消</div>
                <button nz-button nzType="primary" (click)="handleExampleCopy()" class="submit_btn">确定</button>
            </div>
        </div>
    </nz-modal>

    <!-- 数据查询/SQL预览 -->
    <nz-modal [(nzVisible)]="performOperationVisible" (nzOnCancel)="handlePerformCancel()" (nzOnOk)="createPlan()"
        nzWidth="960px" nzOkText="创建" nzTitle="SQL预览">
        <ng-container *nzModalContent>
            <div>{{ sqlStatement }}</div>
        </ng-container>
    </nz-modal>

    <!-- 字段映射 -->
    <app-field-mapping #fieldMappingModal [visible]="fieldMappingVisible" [inquiryField]="inquiryFieldChild"
        [mArray]="mArrayNodeChild" (visibleChange)="fieldMappingChange(false, $event)"></app-field-mapping>
    <!-- P参数配置 -->
    <app-input-config *ngIf="parameterVisible" [data]="paramP"
        (visibleChange)="parameterChange(false, $event)"></app-input-config>
    <!-- 运算列 -->
    <app-operation-column *ngIf="operColumnVisible" [isEdit]="calColumnIndex !== -1"
        [data]="calColumnIndex === -1 ? null : calColumn[calColumnIndex]" [fieldTree]="fieldNodes"
        [domainObjectTree]="domainObjectTree" (visibleChange)="operColumnChange(false, $event)"></app-operation-column>
</div>
<div class="create_wrap">
    <button nz-button (click)="performOperation()">执行运算</button>
    <button nz-button nzType="primary" [disabled]="readOnlyPermis" class="create_btn" (click)="createPlan()">创建</button>
</div>