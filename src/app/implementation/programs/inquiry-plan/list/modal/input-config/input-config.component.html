<nz-modal [nzVisible]="true" nzWidth="960px" nzTitle="P参数" (nzOnCancel)="close()" (nzOnOk)="handleOk()">
    <ng-container *nzModalContent>
        <div class="config-message" *ngIf="!hideMessage">
            <div>
                <i nz-icon nzType="exclamation-circle" nzTheme="fill"></i>
                参数未使用，查询方案将无法保存！
            </div>
            <i nz-icon nzType="close" nzTheme="outline" (click)="handleHideMessage()"></i>
        </div>
        <div class="config-table">
            <div class="table-thead">
                <div *ngFor="let head of ['序号', '入参字段', '入参类型', '是否必填', '操作']">{{ head }}</div>
            </div>
            <form nz-form [formGroup]="form">
                <div formArrayName="items" class="table-tbody">
                    <div *ngFor="let item of items.controls; let i = index;" [formGroupName]="i">
                        <div>{{ i + 1 }}</div>
                        <div>
                            <nz-form-item class="mb0">
                                <nz-form-control [nzErrorTip]="errorTips.globalErrorTip">
                                    <input nz-input formControlName="columnName" placeholder="请输入">
                                </nz-form-control>
                                <app-form-error-tip #errorTips name="入参字段"></app-form-error-tip>
                            </nz-form-item>
                        </div>
                        <div class="center td-right">
                            <i class="link">
                                <svg width="16" height="16" viewBox="0 0 16 16"><g><g transform="matrix(0.7071067690849304,0.7071067690849304,-0.7071067690849304,0.7071067690849304,3.1212999419203697,-7.0918807220023155)"><path d="M17.121307373046875,4.2218017578125L17.121307373046875,5.7218017578125C17.121307373046875,5.9979417578125,17.345167373046877,6.2218017578125,17.621307373046875,6.2218017578125C17.897447373046873,6.2218017578125,18.121307373046875,5.9979417578125,18.121307373046875,5.7208217578125L18.121307373046875,4.2218017578125Q18.121307373046875,2.5649417578125,16.949737373046876,1.3933717578125Q15.778157373046875,0.2218017578125,14.121307373046875,0.2218017578125Q12.464457373046875,0.2218017578125,11.292877373046874,1.3933717578125Q10.121307373046875,2.5649517578125,10.121307373046875,4.2218017578125L10.121307373046875,5.7218017578125C10.121307373046875,5.9979417578125,10.345165373046875,6.2218017578125,10.621307373046875,6.2218017578125C10.897450373046874,6.2218017578125,11.121307373046875,5.9979417578125,11.121307373046875,5.7218017578125L11.121307373046875,4.2218017578125Q11.121307373046875,2.9791617578125,11.999987373046874,2.1004817578125Q12.878667373046875,1.2218017578125,14.121307373046875,1.2218017578125Q15.363947373046875,1.2218017578125,16.242627373046876,2.1004817578125Q17.121307373046875,2.9791617578125,17.121307373046875,4.2218017578125ZM14.621307373046875,10.2218017578125L14.621307373046875,4.2218017578125C14.621307373046875,3.9456617578125,14.397447373046875,3.7218017578125,14.121307373046875,3.7218017578125C13.845167373046875,3.7218017578125,13.621307373046875,3.9456617578125,13.621307373046875,4.2218017578125L13.621307373046875,10.2218017578125C13.621307373046875,10.4979017578125,13.845167373046875,10.7218017578125,14.121307373046875,10.7218017578125C14.397447373046875,10.7218017578125,14.621307373046875,10.4979017578125,14.621307373046875,10.2218017578125ZM10.121307373046875,8.7218017578125C10.121307373046875,8.4456617578125,10.345165373046875,8.2218017578125,10.621307373046875,8.2218017578125C10.897450373046874,8.2218017578125,11.121307373046875,8.4456617578125,11.121307373046875,8.7218017578125L11.121307373046875,10.2218017578125Q11.121307373046875,11.4644017578125,11.999987373046874,12.3431017578125Q12.878667373046875,13.2218017578125,14.121307373046875,13.2218017578125Q15.363947373046875,13.2218017578125,16.242627373046876,12.3431017578125Q17.121307373046875,11.4644017578125,17.121307373046875,10.2218017578125L17.121307373046875,8.7218017578125C17.121307373046875,8.4456617578125,17.345167373046877,8.2218017578125,17.621307373046875,8.2218017578125C17.897447373046873,8.2218017578125,18.121307373046875,8.4456617578125,18.121307373046875,8.7227817578125L18.121307373046875,10.2218017578125Q18.121307373046875,11.8787017578125,16.949737373046876,13.0502017578125Q15.778167373046875,14.2218017578125,14.121307373046875,14.2218017578125Q12.464447373046875,14.2218017578125,11.292877373046874,13.0502017578125Q10.121307373046875,11.8787017578125,10.121307373046875,10.2218017578125L10.121307373046875,8.7218017578125Z" fill-rule="evenodd" fill="#8C8B99" fill-opacity="1"/></g></g></svg>
                            </i>
                            <nz-form-item class="mb0">
                                <nz-form-control nzErrorTip="入参类型不能为空">
                                    <nz-select formControlName="paramColType" nzPlaceHolder="请选择" nzAllowClear>
                                        <nz-option *ngFor="let option of paramsTypeOptions;" [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
                                    </nz-select>
                                </nz-form-control>
                            </nz-form-item>
                        </div>
                        <div class="center">
                            <label nz-checkbox formControlName="isRequired"></label>
                        </div>
                        <div>
                            <i class="delete"
                               nz-icon
                               (click)="handleDelete(i)"
                            >
                                <svg width="16" height="16" viewBox="0 0 16 16"><g><g><path d="M13.5,4L11,4C11,3.94626,10.99134,3.8928700000000003,10.97434,3.8418900000000002L10.47434,2.341886C10.40628,2.137715,10.21522,2.0000000298023,10,2L6,2C5.78478,2,5.593719999999999,2.137715,5.52566,2.341886L5.0258199999999995,3.8414099999999998L5.0258199999999995,3.8414099999999998C5.00866,3.8928700000000003,5,3.94626,5,4L2.5,4C2.223858,4,2,4.22386,2,4.5C2,4.77614,2.223858,5,2.5,5L3.5,5L3.5,12.5Q3.5,13.1213,3.93934,13.5607Q4.37868,14,5,14L11,14Q11.62132,14,12.0607,13.5607Q12.5,13.1213,12.5,12.5L12.5,5L13.5,5C13.7761,5,14,4.77614,14,4.5C14,4.22386,13.7761,4,13.5,4ZM9.63962,3L9.97295,4L6.02705,4L6.36038,3L9.63962,3ZM4.5,12.5L4.5,5L11.5,5L11.5,12.5Q11.5,13,11,13L5,13Q4.5,13,4.5,12.5ZM7,6C6.72386,6,6.5,6.22386,6.5,6.5L6.5,11C6.5,11.27614,6.72386,11.5,7,11.5C7.27614,11.5,7.5,11.27614,7.5,11L7.5,6.5C7.5,6.22386,7.27614,6,7,6ZM9,6C8.72386,6,8.5,6.22386,8.5,6.5L8.5,11C8.5,11.27614,8.72386,11.5,9,11.5C9.27614,11.5,9.5,11.27614,9.5,11L9.5,6.5C9.5,6.22386,9.27614,6,9,6Z" fill-rule="evenodd"/></g></g></svg>
                            </i>
                        </div>
                    </div>
                </div>
            </form>
            <button *ngIf="items.length < 10" (click)="handleAdd()" nz-button nzType="dashed">
                <i nz-icon>
                    <svg width="16" height="16" viewBox="0 0 16 16"><g><g><path d="M8,2C7.72386,2,7.5,2.223858,7.5,2.5L7.5,7.5L2.5,7.5C2.223858,7.5,2,7.72386,2,8C2,8.27614,2.223858,8.5,2.5,8.5L7.5,8.5L7.5,13.5C7.5,13.7761,7.72386,14,8,14C8.27614,14,8.5,13.7761,8.5,13.5L8.5,8.5L13.5,8.5C13.7761,8.5,14,8.27614,14,8C14,7.72386,13.7761,7.5,13.5,7.5L8.5,7.5L8.5,2.5C8.5,2.223858,8.27614,2,8,2Z"/></g></g></svg>
                </i>新增入参
            </button>
        </div>
    </ng-container>
</nz-modal>